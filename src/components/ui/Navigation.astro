---

---

<nav
  class="w-full py-3 px-4 sm:px-12 lg:px-20 flex justify-between items-center text-base font-bold border-b border-[var(--border-color)]"
>
  <a
    href="/"
    class="hover:opacity-80 transition-opacity flex items-center gap-3"
  >
    <img src="/logo.png" alt="Olaf Klein Logo" class="h-10 w-auto" />
    <span class="sr-only">Home</span>
  </a>

  <div class="flex items-center gap-3 md:gap-6">
    <a
      href="/docs/en/intro"
      id="nav-docs-link"
      class="hover:text-primary transition-colors text-sm md:text-base"
      ><span class="hidden md:inline">Documentation</span><span
        class="md:hidden">Docs</span
      ></a
    >

    <div
      class="flex items-center gap-2 border-l border-[var(--border-color)] pl-3 md:pl-6"
    >
      <button
        id="lang-toggle"
        class="text-sm font-black hover:text-primary transition-colors px-2 py-1 rounded border border-[var(--border-color)]"
        aria-label="Switch Language"
      >
        En
      </button>

      <button
        id="theme-toggle"
        aria-label="Toggle Theme"
        class="p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-white/10 transition-colors"
      >
        <svg
          id="theme-toggle-dark-icon"
          class="hidden w-6 h-6"
          fill="currentColor"
          viewBox="0 0 20 20"
          xmlns="http://www.w3.org/2000/svg"
          ><path
            d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"
          ></path></svg
        >
        <svg
          id="theme-toggle-light-icon"
          class="hidden w-6 h-6"
          fill="currentColor"
          viewBox="0 0 20 20"
          xmlns="http://www.w3.org/2000/svg"
          ><path
            d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"
            fill-rule="evenodd"
            clip-rule="evenodd"></path></svg
        >
      </button>
    </div>
  </div>
</nav>

<script>
  // --- Language Toggle Logic ---
  const langToggleBtn = document.getElementById("lang-toggle");
  const navDocsLink = document.getElementById(
    "nav-docs-link"
  ) as HTMLAnchorElement;

  const updateLangUI = (lang: string) => {
    if (langToggleBtn)
      langToggleBtn.innerText = lang.charAt(0).toUpperCase() + lang.slice(1);
    if (navDocsLink) {
      const isMobile = window.innerWidth < 768;
      navDocsLink.innerHTML =
        lang === "de"
          ? `<span class="hidden md:inline">Dokumentation</span><span class="md:hidden">Docs</span>`
          : `<span class="hidden md:inline">Documentation</span><span class="md:hidden">Docs</span>`;
      navDocsLink.href = `/docs/${lang}/intro`;
    }
  };

  // Initial Language Selection
  let currentLang = localStorage.getItem("lang");
  if (!currentLang) {
    const browserLang = navigator.language.split("-")[0];
    currentLang = browserLang === "de" ? "de" : "en";
    localStorage.setItem("lang", currentLang);
  }
  updateLangUI(currentLang);

  langToggleBtn?.addEventListener("click", () => {
    const newLang = currentLang === "en" ? "de" : "en";
    localStorage.setItem("lang", newLang);
    currentLang = newLang;
    updateLangUI(newLang);

    // Dispatch event for other components to update
    window.dispatchEvent(new CustomEvent("lang-changed", { detail: newLang }));

    // If we are on a documentation page, redirect to the other language version
    if (window.location.pathname.includes("/docs/")) {
      const pathParts = window.location.pathname.split("/");
      // Assuming structure /docs/[lang]/[slug]
      if (pathParts[2] === "en" || pathParts[2] === "de") {
        pathParts[2] = newLang;
        window.location.pathname = pathParts.join("/");
      }
    }
  });

  // --- Theme Toggle Logic ---
  const themeToggleDarkIcon = document.getElementById("theme-toggle-dark-icon");
  const themeToggleLightIcon = document.getElementById(
    "theme-toggle-light-icon"
  );
  const themeToggleBtn = document.getElementById("theme-toggle");

  // Set initial icon visibility
  if (document.documentElement.classList.contains("dark")) {
    themeToggleLightIcon?.classList.remove("hidden");
  } else {
    themeToggleDarkIcon?.classList.remove("hidden");
  }

  themeToggleBtn?.addEventListener("click", function () {
    // toggle icons inside button
    themeToggleDarkIcon?.classList.toggle("hidden");
    themeToggleLightIcon?.classList.toggle("hidden");

    // if set via local storage previously
    if (localStorage.getItem("theme")) {
      if (localStorage.getItem("theme") === "light") {
        document.documentElement.classList.add("dark");
        localStorage.setItem("theme", "dark");
      } else {
        document.documentElement.classList.remove("dark");
        localStorage.setItem("theme", "light");
      }

      // if NOT set via local storage previously
    } else {
      if (document.documentElement.classList.contains("dark")) {
        document.documentElement.classList.remove("dark");
        localStorage.setItem("theme", "light");
      } else {
        document.documentElement.classList.add("dark");
        localStorage.setItem("theme", "dark");
      }
    }
  });
</script>
